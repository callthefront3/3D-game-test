<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Three.js GLB Preview (Minimal)</title>
  <style>
    html,body{height:100%;margin:0}
    canvas{display:block;width:100%;height:100%}
  </style>
</head>
<body>
<script type="module">
// 최소한의 three.js + GLB 로더 예제
// 사용법: 이 파일과 같은 폴더에 model.glb를 두고 로컬 서버에서 열기 (예: python -m http.server)

import * as THREE from 'https://unpkg.com/three@0.158.0/build/three.module.js';
import { GLTFLoader } from 'https://unpkg.com/three@0.158.0/examples/jsm/loaders/GLTFLoader.js';
import { OrbitControls } from 'https://unpkg.com/three@0.158.0/examples/jsm/controls/OrbitControls.js';

// 렌더러
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setPixelRatio(window.devicePixelRatio || 1);
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// 씬 / 카메라
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xf0f0f0);
const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.set(0, 1.6, 3);

// 라이팅
const hemi = new THREE.HemisphereLight(0xffffff, 0x444444, 1.0);
hemi.position.set(0, 1, 0);
scene.add(hemi);
const dir = new THREE.DirectionalLight(0xffffff, 1.0);
dir.position.set(5, 10, 7.5);
scene.add(dir);

// 컨트롤 (마우스 드래그/줌)
const controls = new OrbitControls(camera, renderer.domElement);
controls.target.set(0, 1, 0);
controls.update();
controls.enableDamping = true;

// 그리드(선택사항) - 주석 해제하면 바닥 보임
//const grid = new THREE.GridHelper(10, 10);
//scene.add(grid);

// GLB 로드
const loader = new GLTFLoader();
loader.load(
  'model.glb', // 같은 폴더에 놓인 모델 파일 이름
  (gltf) => {
    const root = gltf.scene;
    // 모델을 보기 좋은 크기로 정규화 및 중앙 정렬
    const box = new THREE.Box3().setFromObject(root);
    const size = box.getSize(new THREE.Vector3());
    const maxDim = Math.max(size.x, size.y, size.z);
    if (maxDim > 0) {
      const scale = 1.5 / maxDim; // 적당한 스케일
      root.scale.setScalar(scale);
    }
    // 중앙을 원점으로 이동
    box.setFromObject(root);
    const center = box.getCenter(new THREE.Vector3());
    root.position.sub(center);

    scene.add(root);
  },
  (xhr) => {
    // 로드 진행 (선택사항)
    // console.log((xhr.loaded / xhr.total * 100) + '% loaded');
  },
  (err) => {
    console.error(err);
    alert('모델 로드에 실패했습니다. 콘솔을 확인하세요.');
  }
);

// 리사이즈 처리
window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

// 애니메이션 루프
function animate() {
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
}
animate();

</script>
</body>
</html>
